---
import { ClientRouter } from 'astro:transitions';
import LanguagePicker from '../components/LanguagePicker.astro';
import Background from '../components/Background.astro';
import { ui } from '../i18n/ui';

const { title, lang } = Astro.props;
const t = ui[lang as keyof typeof ui] ?? ui.en;
const isStarsPage = Astro.url.pathname.includes('/stars');
const isBanditPage = Astro.url.pathname.includes('/bandit');
const isTspPage = Astro.url.pathname.includes('/tsp');
---

<!DOCTYPE html>
<html lang={lang} class="scroll-smooth bg-[#111]">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
		<ClientRouter />
	</head>
	<body class="text-white font-sans antialiased min-h-screen flex flex-col relative">
		
        <Background />

        <header class="w-full max-w-3xl mx-auto p-6 flex justify-between items-center border-b border-gray-800/50 relative z-10">
			
            <div class="flex items-center gap-4">
                <a href={`/${lang}/`} class="font-bold tracking-wider hover:text-blue-400 transition-colors">
                    Sakasu's note
                </a>
                <a
                    href={`/${lang}/stars/`}
                    class={`text-xs md:text-sm transition-colors ${
                        isStarsPage
                            ? 'text-blue-400'
                            : 'text-gray-400 hover:text-white'
                    }`}
                >
                    {t['nav.stars']}
                </a>
                <a
                    href={`/${lang}/bandit/`}
                    class={`text-xs md:text-sm transition-colors ${
                        isBanditPage
                            ? 'text-blue-400'
                            : 'text-gray-400 hover:text-white'
                    }`}
                >
                    {t['nav.bandit']}
                </a>
                <a
                    href={`/${lang}/tsp/`}
                    class={`text-xs md:text-sm transition-colors ${
                        isTspPage
                            ? 'text-blue-400'
                            : 'text-gray-400 hover:text-white'
                    }`}
                >
                    {t['nav.tsp']}
                </a>
                </div>

            <LanguagePicker />
            
		</header>

		<main class="w-full max-w-3xl mx-auto p-6 flex-grow relative z-10">
			<slot />
		</main>

        <footer class="text-center p-8 text-gray-600 text-sm relative z-10">
            Â© 2025 
        </footer>

	</body>
</html>
